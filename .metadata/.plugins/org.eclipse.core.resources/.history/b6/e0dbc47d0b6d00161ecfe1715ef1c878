/*
 * main.cpp

 *
 *  Created on: 21 баев 2016
 *      Author: DorAlt
 */


#include <cstdio>
#include <cstdlib>
#include <cstring>

#include "spImageProc.h"
extern "C"{
#include "SPConfig.h"
#include "SPPoint.h"
#include "MainAux.h"
}

#define BUFSIZE 1024
#define DEFCON "spcbir.config"

int main(int argc, const char** argv){
	SPConfig config;
	int numOfImages;
	SP_CONFIG_MSG* msg;
	SPPoint* features;
	const char* filename = (char*)malloc(BUFSIZE);
	if(filename == NULL)
		return -1;
	filename = DEFCON;
	for(int i=0; i<argc;i++){
		if(strcmp(argv[i],"-c")==0){
			if(i+1<argc)
				filename=argv[i+1];
		}
	}
	if(!checkFileName(filename)){
		return -1;
	}
	config = spConfigCreate(filename,msg);
	if(*msg != SP_CONFIG_SUCCESS){
		free((void*)filename);
		return -1;
	}
	numOfImages= spConfigGetNumOfImages(config,msg);
	if(*msg != SP_CONFIG_SUCCESS){
		free((void*)filename);
		return -1;
	}
	for(int i =0;i<numOfImages;i++){
		char* imagePath;
		int numOfFeatures = spConfigGetNumOfFeatures(config,msg);
		if(*msg != SP_CONFIG_SUCCESS){
			free((void*)filename);
			return -1;
		}
		msg =spConfigGetImagePath(imagePath, config, i);
		if(*msg != SP_CONFIG_SUCCESS){
			free((void*)filename);
			return -1;
		}
		features =
	}
}


